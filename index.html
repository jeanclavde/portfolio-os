<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jean_clavde | Portfolio OS</title>

    <link rel="icon" type="image/png" href="logo.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --wallpaper: url('https://images.unsplash.com/photo-1493246507139-91e8fad9978e?q=80&w=2070&auto=format&fit=crop'); 
            --glass-heavy: rgba(20, 20, 22, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #a1a1aa;
            --term-green: #28fa68;
            --term-blue: #58a6ff;
            --accent-blue: #0a84ff;
        }

        body {
            margin: 0; overflow: hidden; height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--wallpaper) no-repeat center center/cover;
            color: var(--text-main);
            user-select: none;
            -webkit-font-smoothing: antialiased;
        }

        /* --- BOOT SCREEN STYLES --- */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000000; z-index: 99999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 1s ease-out;
        }

        .apple-logo-boot {
            width: 100px; height: auto; margin-bottom: 50px;
        }

        .loading-track {
            width: 200px; height: 6px; background: #333; border-radius: 3px; overflow: hidden;
        }

        .loading-fill {
            width: 0%; height: 100%; background: #fff; border-radius: 3px;
            transition: width 3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* --- DESKTOP WRAPPER --- */
        #desktop-container {
            opacity: 0; transition: opacity 1.5s ease-in;
            width: 100%; height: 100%;
            background: var(--wallpaper) no-repeat center center/cover;
        }

        /* --- TOP BAR --- */
        .top-bar {
            position: absolute; top: 0; width: 100%; height: 28px;
            background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(15px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; font-size: 13px; font-weight: 500; z-index: 2000;
            box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        }
        .top-left span { margin-right: 18px; cursor: pointer; opacity: 0.95; font-weight: 600; }

        /* --- WINDOWS GENERAL (Dark Glass Theme) --- */
        .window {
            position: absolute; min-width: 600px; min-height: 400px;
            background: var(--glass-heavy);
            backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--glass-border); 
            border-radius: 12px; 
            overflow: hidden; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.5);
            display: flex; flex-direction: column;
            opacity: 0; transform: scale(0.95); pointer-events: none;
            transition: 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .window.active { opacity: 1; transform: scale(1); pointer-events: auto; }

        /* TITLE BAR (Shared for all windows) */
        .title-bar { 
            height: 38px; display: flex; align-items: center; padding: 0 16px; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
            position: relative; 
            justify-content: flex-end; /* Pushes buttons to the RIGHT */
        }
        
        .window-title { 
            position: absolute; left: 0; right: 0; text-align: center;
            color: rgba(255,255,255,0.7); font-size: 13px; font-weight: 600; 
            pointer-events: none; 
        }

        .traffic-lights { display: flex; gap: 8px; z-index: 10; }
        .dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff5f57; border: 1px solid #e0443e; }
        .min { background: #febc2e; border: 1px solid #d89e24; }
        .max { background: #28c840; border: 1px solid #1aab29; }
        
        .content { flex-grow: 1; position: relative; overflow: hidden; display: flex; flex-direction: column; }

        /* --- TEXTEDIT SPECIFIC --- */
        .textedit-body {
            background: #ffffff; color: #222; font-family: 'Inter', sans-serif; 
            flex-grow: 1; padding: 40px; overflow-y: auto; font-size: 14px; line-height: 1.6;
        }
        .te-header { font-size: 26px; font-weight: 700; margin-bottom: 5px; color: #000; letter-spacing: -0.5px; }
        .te-subheader { font-size: 15px; color: #666; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .te-section { margin-bottom: 25px; }
        .te-label { font-weight: 600; font-size: 11px; color: #999; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
        .te-text { color: #333; font-weight: 400; }
        
        /* --- TERMINAL SPECIFIC --- */
        .term-container {
            flex-grow: 1; padding: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px; color: #f0f0f0; overflow-y: auto; cursor: text;
        }
        .term-line { margin-bottom: 6px; line-height: 1.5; word-wrap: break-word; }
        .prompt { color: var(--term-green); font-weight: 700; }
        .path { color: var(--term-blue); font-weight: 700; }
        .input-line { display: flex; }
        .cmd-input { background: transparent; border: none; outline: none; color: white; font-family: 'JetBrains Mono', monospace; font-size: 13px; flex-grow: 1; caret-color: white; margin-left: 8px; }
        .term-link { color: #58a6ff; text-decoration: underline; cursor: pointer; }
        .term-success { color: var(--term-green); }
        .term-error { color: #ff5f57; }
        .term-desc { color: #888; margin-left: 10px; }

        /* --- FINDER (PROJECTS) SPECIFIC (Now Dark) --- */
        #win-projects .content { flex-direction: row; } 

        .sidebar { 
            width: 180px; background: rgba(0,0,0,0.2); 
            padding: 20px 10px; font-size: 13px; color: var(--text-muted); 
            border-right: 1px solid var(--glass-border); 
            flex-shrink: 0; 
        }
        .sidebar-group-title { font-size: 11px; font-weight: 600; margin-bottom: 8px; padding-left: 8px; letter-spacing: 0.5px; }
        .sidebar-item { padding: 6px 8px; border-radius: 6px; margin-bottom: 2px; display: flex; gap: 8px; font-weight: 500; cursor: pointer; }
        .sidebar-item.active { background: rgba(255,255,255,0.1); color: #fff; }
        
        .finder-view { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
        
        .finder-toolbar { margin-bottom: 15px; display: flex; justify-content: flex-end; }
        .fake-search { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 6px; font-size: 12px; color: #aaa; width: 150px; display: flex; align-items: center; gap: 6px; }

        .project-list { display: flex; flex-direction: column; gap: 10px; }
        .project-item {
            display: flex; align-items: flex-start; gap: 15px;
            padding: 12px; border-radius: 8px;
            background: rgba(255,255,255,0.03); border: 1px solid transparent;
            transition: 0.1s; cursor: default;
        }
        .project-item:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.1); }
        
        .project-media {
            width: 160px; height: 90px; 
            background: #000; border-radius: 6px; border: 1px solid rgba(255,255,255,0.1);
            flex-shrink: 0; overflow: hidden; position: relative;
            display: grid; place-items: center; cursor: pointer;
        }
        .project-media video { width: 100%; height: 100%; object-fit: cover; transition: 0.2s; }
        .project-media:hover video { opacity: 0.8; }
        
        .play-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 30px; height: 30px; background: rgba(0,0,0,0.6); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; pointer-events: none;
            opacity: 0; transition: 0.2s;
        }
        .project-media:hover .play-overlay { opacity: 1; }
        .play-triangle { width: 0; height: 0; border-left: 10px solid white; border-top: 6px solid transparent; border-bottom: 6px solid transparent; margin-left: 2px; }

        .project-details { flex-grow: 1; }
        .project-title { font-size: 14px; font-weight: 600; color: white; margin-bottom: 4px; }
        .project-desc { font-size: 13px; color: var(--text-muted); line-height: 1.4; margin-bottom: 8px; }
        .project-tags { display: flex; gap: 6px; flex-wrap: wrap; }
        .tag { 
            font-size: 10px; padding: 2px 8px; border-radius: 10px; 
            background: rgba(255,255,255,0.1); color: var(--text-muted); font-weight: 500; 
        }

        /* --- VIDEO MODAL --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
            z-index: 999999; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s;
        }
        .modal-content { width: 80%; max-width: 1000px; background: transparent; display: flex; flex-direction: column; gap: 10px; transform: scale(0.9); transition: transform 0.3s; }
        .modal-video-player { width: 100%; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); background: #000; }
        .close-modal { position: absolute; top: -40px; right: 0; color: white; font-size: 30px; cursor: pointer; }
        .modal-title { color: white; font-size: 18px; font-weight: 600; margin-left: 5px;}

        /* --- DOCK --- */
        .dock-container { position: absolute; bottom: 20px; width: 100%; display: flex; justify-content: center; z-index: 3000; }
        .dock { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.15); border-radius: 24px; padding: 10px; display: flex; gap: 15px; }
        .dock-icon { width: 55px; height: 55px; border-radius: 14px; background: #333; cursor: pointer; display: grid; place-items: center; font-size: 24px; transition: 0.2s; position: relative;}
        .dock-icon:hover { transform: translateY(-10px) scale(1.1); }
        .dock-icon.open::after { content: ''; position: absolute; bottom: -8px; width: 4px; height: 4px; background: rgba(255,255,255,0.8); border-radius: 50%; }

        .ico-term { background: #1a1a1a; border: 1px solid #444; color: #ccc; }
        .ico-text { background: #ffffff; border: 1px solid #ccc; color: #333; font-size: 20px;}
        
        /* FOLDER ICON */
        .ico-finder { 
            background-color: transparent;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/OneDrive_Folder_Icon.svg/1024px-OneDrive_Folder_Icon.svg.png');
            background-size: cover; background-position: center;
        }
    </style>
</head>
<body>

    <div id="boot-screen">
        <img src="apple_logo.png" class="apple-logo-boot" alt="Apple Logo">
        <div class="loading-track">
            <div class="loading-fill" id="boot-bar"></div>
        </div>
    </div>

    <div id="desktop-container">
        
        <div id="video-modal" class="modal-overlay" onclick="closeModal()">
            <div class="modal-content" onclick="event.stopPropagation()">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <div id="modal-caption" class="modal-title">Project Preview</div>
                <video id="modal-video" class="modal-video-player" controls autoplay></video>
            </div>
        </div>

        <div class="top-bar">
            <div class="top-left">
                <span>Ô£ø</span>
                <span style="font-weight: 700;">Finder</span>
                <span>File</span>
                <span>Edit</span>
                <span>View</span>
            </div>
            <div class="top-right" id="clock">12:00 PM</div>
        </div>

        <div class="window active" id="win-term" data-dock="doc-term" style="top: 10%; left: 15%;">
            <div class="title-bar" onmousedown="dragStart(event)">
                <div class="window-title">Jean_clavde ‚Äî -zsh</div>
                <div class="traffic-lights">
                    <div class="dot min"></div>
                    <div class="dot max"></div>
                    <div class="dot close" onclick="closeWindow('win-term')"></div>
                </div>
            </div>
            <div class="content">
                <div class="term-container" id="term-output" onclick="focusInput()">
                    <div class="term-line">Last login: <span id="login-time"></span> on ttys000</div>
                    <div class="term-line">Welcome. Type <span class="term-success">'help'</span> to see available commands.</div>
                    <br>
                    <div class="input-line">
                        <span class="prompt">jean@macbook</span> <span class="path">~ %</span>
                        <input type="text" class="cmd-input" id="cmd-input" autocomplete="off" spellcheck="false" autofocus>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="win-textedit" data-dock="doc-text" style="top: 15%; left: 35%; width: 550px; height: 600px;">
            <div class="title-bar" onmousedown="dragStart(event)" style="background: #e3e3e3; border-bottom: 1px solid #ccc;">
                <div class="window-title" style="color: #444;">About_Me.txt</div>
                <div class="traffic-lights">
                    <div class="dot min"></div>
                    <div class="dot max"></div>
                    <div class="dot close" onclick="closeWindow('win-textedit')"></div>
                </div>
            </div>
            <div class="content">
                <div class="textedit-body">
                    <div class="te-header">Jean_clavde</div>
                    <div class="te-subheader">Roblox Scripter ‚Ä¢ 2.5 Years Experience</div>

                    <div class="te-section">
                        <div class="te-label">About Me</div>
                        <div class="te-text">
                            Hey there! I‚Äôm a Roblox scripter with 2.5 years of experience, and I absolutely love building logical systems, fixing tricky bugs, and writing clean, reliable code. I really enjoy working with other developers and turning ideas into fun, polished gameplay ‚Äî and I always focus on making my scripts easy to understand and maintain.
                        </div>
                    </div>

                    <div class="te-section">
                        <div class="te-label">Work Ethic</div>
                        <div class="te-text">
                            I‚Äôm the type of person who learns as I work and never really stops improving, and I always make sure to communicate clearly and deliver steady progress.
                            <br><br>
                            While UI design isn‚Äôt my strongest area, my real strengths are system logic, problem-solving, and debugging ‚Äî and I‚Äôm always happy to collaborate with UI designers to make the final product shine.
                        </div>
                    </div>

                    <div class="te-section">
                        <div class="te-label">Stats & Experience</div>
                        <div class="te-text">
                            ‚Ä¢ <strong>48 Completed Commissions</strong><br>
                            ‚Ä¢ <strong>13,000+ collective Visits contributed</strong> over multiple projects<br>
                            ‚Ä¢ <strong>System Logic & Debugging</strong> Specialist
                        </div>
                    </div>

                    <div class="te-section">
                        <div class="te-label">Pricing</div>
                        <div class="te-text">
                            Pricing is based on system complexity:<br>
                            ‚Ä¢ <strong>15‚Äì20 ‚Ç¨</strong> (roughly 1,200‚Äì1,600 Robux)<br>
                            <em>Prices are very negotiable and based on requirements.</em>
                        </div>
                    </div>
                    
                    <div class="te-section">
                        <div class="te-label">Contact</div>
                        <div class="te-text">
                            If you‚Äôre looking for someone motivated and hyped about getting the job done ‚Äî I‚Äôm right here!
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="window" id="win-projects" data-dock="doc-finder" style="top: 18%; left: 25%; width: 900px; height: 600px;">
            <div class="title-bar" onmousedown="dragStart(event)">
                <div class="window-title">Examples of my work</div>
                <div class="traffic-lights">
                    <div class="dot min"></div>
                    <div class="dot max"></div>
                    <div class="dot close" onclick="closeWindow('win-projects')"></div>
                </div>
            </div>
            <div class="content">
                <div class="sidebar">
                    <div class="sidebar-group-title">FAVORITES</div>
                    <div class="sidebar-item active">üìÇ All Projects</div>
                    <div class="sidebar-item">‚ö°Ô∏è Systems</div>
                    <div class="sidebar-item">üíæ Backend</div>
                </div>
                <div class="finder-view">
                    <div class="finder-toolbar">
                        <div class="fake-search">üîç Search</div>
                    </div>

                    <div class="project-list">
                        
                        <div class="project-item">
                            <div class="project-media" onclick="expandVideo('vids/AbilitiesSchowcase.mp4', 'Kinetic Push System')">
                                <video src="vids/AbilitiesSchowcase.mp4" autoplay loop muted playsinline></video>
                                <div class="play-overlay"><div class="play-triangle"></div></div>
                            </div>
                            <div class="project-details">
                                <div class="project-title">Kinetic Push & Quest Engine</div>
                                <div class="project-desc">
                                    A physics-based competitive system where players push opponents off-map. Features include a shop with ability purchasing, secure DataStore saving, server-side anti-exploit, and a fully functional quest progression system.
                                </div>
                                <div class="project-tags">
                                    <span class="tag">Physics</span>
                                    <span class="tag">DataStore</span>
                                    <span class="tag">Quests</span>
                                    <span class="tag">Anti-Cheat</span>
                                </div>
                            </div>
                        </div>

                        <div class="project-item">
                            <div class="project-media" onclick="expandVideo('vids/SimpleQuestSystem.mp4', 'Quest Progression Engine')">
                                <video src="vids/SimpleQuestSystem.mp4" autoplay loop muted playsinline></video>
                                <div class="play-overlay"><div class="play-triangle"></div></div>
                            </div>
                            <div class="project-details">
                                <div class="project-title">Quest Progression Engine</div>
                                <div class="project-desc">
                                    A complete questing backend allowing for tracking, data saving, and reward distribution. Built for scalability and easy addition of new mission types.
                                </div>
                                <div class="project-tags">
                                    <span class="tag">DataStore</span>
                                    <span class="tag">Quests</span>
                                    <span class="tag">Modules</span>
                                </div>
                            </div>
                        </div>

                        <div class="project-item">
                            <div class="project-media" onclick="expandVideo('vids/RankSystem.mp4', 'Military Rank & Admin')">
                                <video src="vids/RankSystem.mp4" autoplay loop muted playsinline></video>
                                <div class="play-overlay"><div class="play-triangle"></div></div>
                            </div>
                            <div class="project-details">
                                <div class="project-title">Military Rank & Admin Systems</div>
                                <div class="project-desc">
                                    Comprehensive management for army sims. Includes a custom Admin Panel and automated uniform equipping based on group rank hierarchy.
                                </div>
                                <div class="project-tags">
                                    <span class="tag">Admin Panel</span>
                                    <span class="tag">Group API</span>
                                    <span class="tag">Automation</span>
                                </div>
                            </div>
                        </div>

                        <div class="project-item">
                            <div class="project-media" onclick="expandVideo('vids/FPSShowcase.mp4', 'FPS Framework')">
                                <video src="vids/FPSShowcase.mp4" autoplay loop muted playsinline></video>
                                <div class="play-overlay"><div class="play-triangle"></div></div>
                            </div>
                            <div class="project-details">
                                <div class="project-title">Immersive FPS Framework</div>
                                <div class="project-desc">
                                    Responsive First-Person Shooter engine featuring custom crosshair logic, sound/VFX design, and accurate hit-registration.
                                </div>
                                <div class="project-tags">
                                    <span class="tag">FPS</span>
                                    <span class="tag">VFX/SFX</span>
                                    <span class="tag">Raycasting</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="dock-container">
            <div class="dock">
                <div class="dock-icon ico-term open" id="doc-term" onclick="toggleWindow('win-term')">>_</div>
                <div class="dock-icon ico-text" id="doc-text" onclick="toggleWindow('win-textedit')">‚úé</div>
                <div class="dock-icon ico-finder" id="doc-finder" onclick="toggleWindow('win-projects')"></div>
            </div>
        </div>
    </div>

    <script>
        // --- BOOT SEQUENCE LOGIC ---
        window.onload = function() {
            setTimeout(() => { document.getElementById('boot-bar').style.width = '100%'; }, 100);
            setTimeout(() => {
                document.getElementById('boot-screen').style.opacity = '0';
                document.getElementById('desktop-container').style.opacity = '1';
                setTimeout(() => { document.getElementById('boot-screen').style.display = 'none'; }, 1000);
            }, 3000);
        };

        // --- VIDEO MODAL LOGIC ---
        function expandVideo(src, title) {
            const modal = document.getElementById('video-modal');
            const video = document.getElementById('modal-video');
            const caption = document.getElementById('modal-caption');
            video.src = src;
            caption.innerText = title;
            modal.style.display = 'flex';
            setTimeout(() => { modal.style.opacity = '1'; document.querySelector('.modal-content').style.transform = 'scale(1)'; }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('video-modal');
            const video = document.getElementById('modal-video');
            modal.style.opacity = '0';
            document.querySelector('.modal-content').style.transform = 'scale(0.9)';
            setTimeout(() => { modal.style.display = 'none'; video.pause(); video.src = ""; }, 300);
        }

        // --- TERMINAL LOGIC ---
        const input = document.getElementById('cmd-input');
        const output = document.getElementById('term-output');
        document.getElementById('login-time').innerText = new Date().toLocaleString('en-US', {weekday: 'short', hour: 'numeric', minute: 'numeric'});

        function focusInput() { input.focus(); }

        input.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const cmd = input.value.trim().toLowerCase();
                processCommand(cmd);
                input.value = '';
                setTimeout(() => output.scrollTop = output.scrollHeight, 10);
            }
        });

        function printLine(html) {
            const div = document.createElement('div'); div.className = 'term-line'; div.innerHTML = html;
            output.insertBefore(div, document.querySelector('.input-line'));
        }

        const helpText = `
        Available Commands:<br>
        <span class="term-success">whoami</span> <span class="term-desc">- Opens detailed bio & pricing</span><br>
        <span class="term-success">projects</span> <span class="term-desc">- Opens project explorer</span><br>
        <span class="term-success">contact</span> <span class="term-desc">- Shows contact links</span><br>
        <span class="term-success">clear</span> <span class="term-desc">- Clears the terminal screen</span>
        `;

        function processCommand(cmd) {
            printLine(`<span class="prompt">jean@macbook</span> <span class="path">~ %</span> ${cmd}`);
            switch(cmd) {
                case 'help': printLine(helpText); break;
                case 'whoami': printLine(`Opening 'About_Me.txt'...`); toggleWindow('win-textedit'); break;
                case 'projects': printLine(`Opening Finder...`); toggleWindow('win-projects'); break;
                case 'discord':
                case 'contact':
                     printLine(`Contact me on:<br><span class="term-blue">Discord:</span> <a href="https://discord.com/users/699318403206348890" target="_blank" class="term-link">Click to message</a> (ID: 699318403206348890)<br><span class="term-blue">Roblox:</span> <a href="https://www.roblox.com/users/profile?username=KING_ISAACI" target="_blank" class="term-link">@KING_ISAACI</a>`); 
                     break;
                case 'clear': 
                    document.querySelectorAll('.term-line').forEach(line => { if (!line.innerText.includes("Last login")) line.remove(); }); 
                    break;
                case '': break;
                default: 
                    printLine(`<span class="term-error">zsh: command not found: ${cmd}</span>`);
                    printLine(`Try one of these:`);
                    printLine(helpText);
            }
        }

        // --- CLOCK ---
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric' }).replace(/,/g, '');
        }, 1000);

        // --- WINDOW LOGIC ---
        let zIndex = 100;
        function toggleWindow(winId) {
            const win = document.getElementById(winId);
            const dockId = win.getAttribute('data-dock');
            const icon = document.getElementById(dockId);
            if (win.classList.contains('active')) {
                win.classList.remove('active'); 
                setTimeout(() => { win.classList.add('active'); win.style.zIndex = ++zIndex; if(icon) icon.classList.add('open'); }, 50);
            } else {
                win.classList.add('active'); win.style.zIndex = ++zIndex; if(icon) icon.classList.add('open');
                if(winId === 'win-term') focusInput();
            }
        }
        function closeWindow(id) {
            document.getElementById(id).classList.remove('active');
            const dockId = document.getElementById(id).getAttribute('data-dock');
            if(dockId) document.getElementById(dockId).classList.remove('open');
        }

        // --- DRAG LOGIC ---
        let activeWin = null; let startX, startY, initLeft, initTop;
        function dragStart(e) {
            activeWin = e.target.closest('.window'); if(!activeWin) return;
            activeWin.style.zIndex = ++zIndex; startX = e.clientX; startY = e.clientY; initLeft = activeWin.offsetLeft; initTop = activeWin.offsetTop;
            document.addEventListener('mousemove', dragMove); document.addEventListener('mouseup', dragEnd);
            if(activeWin.id === 'win-term') focusInput();
        }
        function dragMove(e) { if(!activeWin) return; activeWin.style.left = (initLeft + (e.clientX - startX)) + "px"; activeWin.style.top = (initTop + (e.clientY - startY)) + "px"; }
        function dragEnd() { activeWin = null; document.removeEventListener('mousemove', dragMove); document.removeEventListener('mouseup', dragEnd); }
    </script>
</body>
</html>